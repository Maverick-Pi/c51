/****************************************************************************/ /**
 * @file   ch6_1_lattice_screen.c
 * @brief  LED 点阵屏
 * 
 * @author Maverick Pi
 * @date   2025-07-06 14:18:04
 ********************************************************************************/

#include "ch6_1_lattice_screen.h"

u8 code FlowingSubtitles[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x81, 0xFF, 0x10, 0x10, 0xFF, 0x81, 0x00, 0x0E, 
    0x15, 0x15, 0x0D, 0x00, 0x81, 0xFF, 0x01, 0x00,
    0x81, 0xFF, 0x01, 0x00, 0x0E, 0x11, 0x11, 0x0E, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F,
    0xF8, 0x0F, 0xF0, 0x00, 0x0E, 0x11, 0x11, 0x0E, 
    0x00, 0x11, 0x1F, 0x09, 0x10, 0x10, 0x00, 0x81,
    0xFF, 0x01, 0x00, 0x0E, 0x11, 0x91, 0xFF, 0x01, 
    0x00, 0x7D, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
};

static u8 xdata Offset;

void LatticeScreen_Test(void)
{
    u8 i;
    Timer0_Interrupt_Init(Timer_Low, Timer_High);

    while (1) {
        for (i = 0; i < 8; ++i) {
            LatticeScreen_Column(i, FlowingSubtitles[i + Offset]);
        }
    }
}

/*
void Timer0_Routine(void) interrupt 1
{
    static u16 T0_Counter = 0;
    TH0 = Timer_High;
    TL0 = Timer_Low;
    T0_Counter++;

    if (T0_Counter >= 100) {
        T0_Counter = 0;
        ++Offset;
        Offset %= 72;
    }
}
*/
